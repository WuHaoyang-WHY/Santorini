name: CI
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ The workflow is now ready to test your code on the runner."
      # Checks-out Java
      - uses: actions/setup-java@v2
        with:
          distribution: microsoft
          java-version: 17

      # Identifies all relevant Java files that have been changed in latest commit
      - name: Change Java
        uses: tj-actions/changed-files@v13.1
        id: change-java
        with:
          files: |
            pom.xml
            **/*.java

      # Runs type checker for Java files
      - name: Run on Java files
        if: steps.change-java.outputs.any_changed == 'true'
        run: |
          timeout 2m mvn -f java/pom.xml site
          timeout 2m mvn -f java/pom.xml compilie
          timeout 2m mvn -f java/pon.xml test
